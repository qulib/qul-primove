!function a(l,o,u){function s(r,e){if(!o[r]){if(!l[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(v)return v(r,!0);var i=new Error("Cannot find module '"+r+"'");throw i.code="MODULE_NOT_FOUND",i}var n=o[r]={exports:{}};l[r][0].call(n.exports,function(e){var t=l[r][1][e];return s(t||e)},n,n.exports,a,l,o,u)}return o[r].exports}for(var v="function"==typeof require&&require,e=0;e<u.length;e++)s(u[e]);return s}({1:[function(e,t,r){"use strict";e("primo-explore-hathitrust-availability"),function(){angular.module("viewCustom",["angularLoad","hathiTrustAvailability"]).component("prmSearchResultAvailabilityLineAfter",{template:'<hathi-trust-availability msg="Full Text Available Online at HathiTrust" ignore-copyright="true" entity-id="https://login.queensu.ca/idp/shibboleth"></hathi-trust-availability>'});var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://ca.libraryh3lp.com/js/libraryh3lp.js?776";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t);var r=document.createElement("div");r.innerHTML='<div class="needs-js"></div>',document.body.appendChild(r)}()},{"primo-explore-hathitrust-availability":2}],2:[function(e,t,r){e("./js/hathi-trust-availability.module.js"),t.exports="hathiTrustAvailability"},{"./js/hathi-trust-availability.module.js":3}],3:[function(e,t,r){angular.module("hathiTrustAvailability",[]).constant("hathiTrustBaseUrl","https://catalog.hathitrust.org/api/volumes/brief/json/").config(["$sceDelegateProvider","hathiTrustBaseUrl",function(e,t){var r=e.resourceUrlWhitelist();r.push(t+"**"),e.resourceUrlWhitelist(r)}]).factory("hathiTrust",["$http","$q","hathiTrustBaseUrl",function(r,o,i){var e={},t=function(e){if(e.length){var t=i+e.join("|");return r.jsonp(t,{cache:!0,jsonpCallbackParam:"callback"}).then(function(e){return e.data})}return o.resolve(null)};return e.findRecord=function(i){return t(i).then(function(e){for(var t=0;t<i.length;t++){var r=Object.keys(e[i[t]].records)[0];if(r)return o.resolve(e[i[t]].records[r].recordURL)}return o.resolve(null)}).catch(function(e){console.error(e)})},e.findFullViewRecord=function(l){return t(l).then(function(e){for(var t=null,r=0;!t&&r<l.length;r++)for(var i=e[l[r]],n=0;n<i.items.length;n++){var a=i.items[n];if("full view"===a.usRightsString.toLowerCase()){t=i.records[a.fromRecord].recordURL;break}}return o.resolve(t)}).catch(function(e){console.error(e)})},e}]).controller("hathiTrustAvailabilityController",["hathiTrust",function(t){var r=this;r.$onInit=function(){r.msg||(r.msg="Full Text Available at HathiTrust"),r.hideOnline&&n()||r.hideIfJournal&&e()||(r.ignoreCopyright&&!i()&&(r.ignoreCopyright=!1),l())};var e=function(){return!(-1==r.prmSearchResultAvailabilityLine.result.pnx.addata.format[0].toLowerCase().indexOf("journal"))},i=function(){return-1==r.prmSearchResultAvailabilityLine.result.delivery.availability[0].toLowerCase().indexOf("unavailable")},n=function(){var e=r.prmSearchResultAvailabilityLine.result.delivery||[];return e.GetIt1?r.prmSearchResultAvailabilityLine.result.delivery.GetIt1.some(function(e){return e.links.some(function(e){return e.isLinktoOnline})}):-1!==e.deliveryCategory.indexOf("Alma-E")},a=function(e){return e.match(/^\(ocolc\).+/i)},l=function(){var e=(r.prmSearchResultAvailabilityLine.result.pnx.addata.oclcid||[]).filter(a).map(function(e){return"oclc:"+e.toLowerCase().replace("(ocolc)","")});t[r.ignoreCopyright?"findRecord":"findFullViewRecord"](e).then(function(e){var t;e&&(r.fullTextLink=(t=e,r.entityId?t+"?signon=swle:"+r.entityId:t))})}}]).component("hathiTrustAvailability",{require:{prmSearchResultAvailabilityLine:"^prmSearchResultAvailabilityLine"},bindings:{entityId:"@",ignoreCopyright:"<",hideIfJournal:"<",hideOnline:"<",msg:"@?"},controller:"hathiTrustAvailabilityController",template:'<span ng-if="$ctrl.fullTextLink" class="umnHathiTrustLink">                <md-icon alt="HathiTrust Logo">                  <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">  <image id="image0" width="16" height="16" x="0" y="0"                  xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAACBjSFJN                  AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACNFBMVEXuegXvegTsewTveArw                  eQjuegftegfweQXsegXweQbtegnsegvxeQbvegbuegbvegbveQbtegfuegbvegXveQbvegbsfAzt                  plfnsmfpq1/wplPuegXvqFrrq1znr2Ptok/sewvueQfuegbtegbrgRfxyJPlsXDmlTznnk/rn03q                  pVnomkjnlkDnsGnvwobsfhPveQXteQrutHDqpF3qnUnpjS/prmDweQXsewjvrWHsjy7pnkvqqGDv                  t3PregvqhB3uuXjusmzpp13qlz3pfxTskC3uegjsjyvogBfpmkHpqF/us2rttXLrgRjrgBjttXDo                  gx/vtGznjzPtfhHqjCfuewfrjCnwfxLpjC7wtnDogBvssmjpfhLtegjtnEjrtnTmjC/utGrsew7s                  o0zpghnohB/roUrrfRHtsmnlkTbrvH3tnEXtegXvegTveQfqhyHvuXjrrGTpewrsrmXqfRHogRjt                  q2Dqewvqql/wu3vqhyDueQnwegXuegfweQPtegntnUvnt3fvxI7tfhTrfA/vzJvmtXLunEbtegrw                  egTregzskjbsxI/ouoPsqFzniyrz2K3vyZnokDLpewvtnkv30J/w17XsvYXjgBbohR7nplnso1L0                  1Kf40Z/um0LvegXngBnsy5juyJXvsGftrGTnhB/opVHoew7qhB7rzJnnmErkkz3splbqlT3smT3t                  tXPqqV7pjzHvunjrfQ7vewPsfA7uoU3uqlruoEzsfQ/vegf///9WgM4fAAAAFHRSTlOLi4uLi4uL                  i4uLi4uLi4tRUVFRUYI6/KEAAAABYktHRLvUtndMAAAAB3RJTUUH4AkNDgYNB5/9vwAAAQpJREFU                  GNNjYGBkYmZhZWNn5ODk4ubh5WMQERUTl5CUEpWWkZWTV1BUYlBWUVVT19BUUtbS1tHV0zdgMDQy                  NjE1MzRXsrC0sraxtWOwd3B0cnZxlXZz9/D08vbxZfDzDwgMCg4JdQsLj4iMio5hiI2LT0hMSk5J                  TUvPyMzKzmHIzcsvKCwqLiktK6+orKquYZCuratvaGxqbmlta+8QNRBl6JQ26Oru6e3rnzBx0uQ8                  aVGGvJopU6dNn1E8c9bsOXPniYoySM+PXbBw0eIlS5fl1C+PFRFlEBUVXbFy1eo1a9fliQDZYIHY                  9fEbNm7avEUUJiC6ddv2HTt3mSuBBfhBQEBQSEgYzOIHAHtfTe/vX0uvAAAAJXRFWHRkYXRlOmNy                  ZWF0ZQAyMDE2LTA5LTEzVDE0OjA2OjEzLTA1OjAwNMgVqAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAx                  Ni0wOS0xM1QxNDowNjoxMy0wNTowMEWVrRQAAAAASUVORK5CYII=" />                  </svg>                 </md-icon>                <a target="_blank" ng-href="{{$ctrl.fullTextLink}}">                {{ ::$ctrl.msg }}                  <prm-icon external-link="" icon-type="svg" svg-icon-set="primo-ui" icon-definition="open-in-new"></prm-icon>                </a>              </span>'})},{}]},{},[1]);
//# sourceMappingURL=custom.js.map
